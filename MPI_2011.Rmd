---
title: "MPI_2011"
author: "JBN"
date: '2022-06-17'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


###This Script will be used to read In MPI data from 2011 & 2017 

Imports 
```{r}
library(readxl)
library(dplyr)
library(tidyverse)
library(sf)
library(ggplot2)
library(rgdal)
```

read in the MPI Excel
```{r}
MPI_2011 <- read_excel("./2011_MPI_excerpt data.xlsx")
```

```{r}
head(MPI_2011)
```

Import Shape file into r (Change district 90 --> district 60)
```{r}
#file name: 0=boundary, 1=province, 2=district 
zim_boundary <- st_read("./gadm36_ZWE_shp/gadm36_ZWE_0.shp") 
zim_province <- st_read("./gadm36_ZWE_shp/gadm36_ZWE_1.shp")
zim_district <- st_read("./gadm36_ZWE_shp/gadm36_ZWE_2.shp")  
```
plot boundary, province, district 
```{r}
plot(zim_boundary)
plot(zim_province)
plot(zim_district)

```
Rename cols to match
```{r}
zim_district <- rename(zim_district, District_name = "NAME_2")
```


Get the IDs to match 
```{r}
zim_district <- zim_district %>% 
  arrange(District_name) %>% 
  mutate(District_ID = c(1:60))

joined_zim <-  full_join (zim_district,MPI_2011, by = "District_ID")
  
```

 
Mapping M0_k3 Adjusted Headcount Ratio
```{r}
ggplot() +
geom_sf(data = joined_zim, size = 1, color = "black", aes(fill = M0_k3)) +
ggtitle("Adjusted Headcount in Zimbabwe - 2011") + scale_fill_viridis_c(breaks = c(0.00, 0.05, 0.10, 0.15, 0.20, 0.25, 0.30, 0.35, 0.40))+
coord_sf() 
```

Mapping M1_k3 Adjusted Poverty Gap
```{r}
ggplot() +
  geom_sf(data = joined_zim, size = 1, color = "black", aes(fill = M1_k3)) +
  coord_sf()+ 
  scale_fill_viridis_c(breaks = c(0.00, 0.05, 0.10, 0.15, 0.20, 0.25, 0.30, 0.35, 0.40)) +
  ggtitle("Adjusted Poverty Gap in Zimbabwe - 2011")

```

Mapping M2_k3 Adjusted Poverty Severity.
```{r}
ggplot() +
geom_sf(data = joined_zim, size = 1, color = "black", aes(fill = M2_k3)) +
ggtitle("Adjusted Poverty Severity in Zimbabwe - 2011") + scale_fill_viridis_c(breaks = c(0.00, 0.05, 0.10, 0.15, 0.20, 0.25, 0.30, 0.35, 0.40)) +
coord_sf()

```


Horizontal Bar Chart - M0_k3 Adjusted Headcount Ratio
```{r}
joined_zim %>% 
  arrange(desc(M0_k3))  %>% 
  ggplot(aes(x=reorder(District_name.x , M0_k3), y = M0_k3, fill = M0_k3)) +
  geom_bar(stat="identity") + coord_flip() + labs(title="Plot of Adjusted Headcount Ratio per district", 
         x="District Name", y = "Adjusted HeadCount Ratio") + theme(axis.text.y = element_text(size = 6)) + guides(fill=guide_legend(title="AHR"))

```


Horizontal Bar Chart - M1_k3 change later
```{r}
joined_zim %>% 
  arrange(desc(M0_k3))  %>% 
  ggplot(aes(x=reorder(District_name.x , M1_k3), y = M0_k3, fill = M0_k3)) +
  geom_bar(stat="identity") + coord_flip() + labs(title="Plot of Adjusted Headcount Ratio per district", 
         x="District Name", y = "Adjusted HeadCount Ratio") + theme(axis.text.y = element_text(size = 6)) + guides(fill=guide_legend(title="AHR"))

```


Horizontal Bar Chart - M2_k3 change later
```{r}
joined_zim %>% 
  arrange(desc(M0_k3))  %>% 
  ggplot(aes(x=reorder(District_name.x , M2_k3), y = M0_k3, fill = M0_k3)) +
  geom_bar(stat="identity") + coord_flip() + labs(title="Plot of Adjusted Headcount Ratio per district", 
         x="District Name", y = "Adjusted HeadCount Ratio") + theme(axis.text.y = element_text(size = 6)) + guides(fill=guide_legend(title="AHR"))

```




